<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Ваша информация</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .info-block { background: #f0f0f0; padding: 15px; margin: 10px 0; border-radius: 5px; }
        button { padding: 10px 20px; margin: 10px 0; cursor: pointer; }
    </style>
</head>
<body>
    <h1>Информация о вашей системе:</h1>
    
    <div class="info-block">
        <strong>Операционная система:</strong> <span id="os">Определяется...</span>
    </div>
    
    <div class="info-block">
        <strong>Браузер:</strong> <span id="browser">Определяется...</span>
    </div>
    
    <div class="info-block">
        <strong>Разрешение экрана:</strong> <span id="screen">Определяется...</span>
    </div>
    
    <div class="info-block">
        <strong>Язык браузера:</strong> <span id="language">Определяется...</span>
    </div>
    
    <div class="info-block">
        <strong>Внешний IP:</strong> <span id="ip">Определяется... (требуется доступ к API)</span>
    </div>
    
    <button onclick="getLocation()">Определить местоположение</button>
    
    <div class="info-block">
        <strong>Геолокация:</strong> <span id="location">Нажмите кнопку выше</span>
    </div>

    <script>
        // Определяем ОС
        function getOS() {
            const userAgent = navigator.userAgent;
            if (userAgent.includes('Windows')) return 'Windows';
            if (userAgent.includes('Mac')) return 'MacOS';
            if (userAgent.includes('Linux')) return 'Linux';
            if (userAgent.includes('Android')) return 'Android';
            if (userAgent.includes('iOS') || userAgent.includes('iPhone') || userAgent.includes('iPad')) return 'iOS';
            return 'Неизвестно';
        }

        // Определяем браузер
        function getBrowser() {
            const userAgent = navigator.userAgent;
            if (userAgent.includes('Chrome') && !userAgent.includes('Edg')) return 'Chrome';
            if (userAgent.includes('Firefox')) return 'Firefox';
            if (userAgent.includes('Safari') && !userAgent.includes('Chrome')) return 'Safari';
            if (userAgent.includes('Edg')) return 'Edge';
            return 'Неизвестно';
        }

        // Получаем внешний IP через публичное API
        async function getIP() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                document.getElementById('ip').textContent = data.ip;
                
                // Дополнительно получаем информацию о местоположении по IP
                const geoResponse = await fetch(`https://ipapi.co/${data.ip}/json/`);
                const geoData = await geoResponse.json();
                document.getElementById('location').textContent = `${geoData.country_name}, ${geoData.city}`;
            } catch (error) {
                document.getElementById('ip').textContent = 'Ошибка получения IP';
            }
        }

        // Геолокация через браузер (запрашивает разрешение)
        function getLocation() {
            if (!navigator.geolocation) {
                document.getElementById('location').textContent = 'Геолокация не поддерживается';
                return;
            }

            navigator.geolocation.getCurrentPosition(
                async (position) => {
                    const lat = position.coords.latitude;
                    const lon = position.coords.longitude;
                    
                    // Используем OpenStreetMap Nominatim для получения адреса
                    try {
                        const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`);
                        const data = await response.json();
                        document.getElementById('location').textContent = 
                            `${data.address.country || ''}, ${data.address.city || data.address.town || ''}`;
                    } catch (error) {
                        document.getElementById('location').textContent = `Широта: ${lat}, Долгота: ${lon}`;
                    }
                },
                (error) => {
                    document.getElementById('location').textContent = 'Доступ к геолокации запрещен';
                }
            );
        }

        // Заполняем информацию при загрузке страницы
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('os').textContent = getOS();
            document.getElementById('browser').textContent = getBrowser();
            document.getElementById('screen').textContent = `${screen.width} × ${screen.height}`;
            document.getElementById('language').textContent = navigator.language;
            
            // Получаем IP (раскомментируйте, если хотите использовать)
            // getIP();
        });
    </script>
</body>
</html>
